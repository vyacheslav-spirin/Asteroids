Asteroids
=================

## Описание

Клон популярной игры [Asteroids](https://en.wikipedia.org/wiki/Asteroids_(video_game)), написанный на *C#* и испольщующий движок [Unity](https://unity.com/) для визуализации. Вся игровая логика является полностью [детерминированной](https://en.wikipedia.org/wiki/Deterministic_algorithm), что позволяет с легкостью реализовать мультиплеер (что и было сделано), систему реплеев, а так же легче находить ошибки. В качестве основного  архитектурного решения для написания игровой логики используется гибрид ECS и OOP.

## Особенности

* Полноценная поддержка мультиплеера на основе [UDP](https://en.wikipedia.org/wiki/User_Datagram_Protocol). Количество игроков ограничено до 4-х, но может быть существенно увеличено.
* Разделение кода на игровую логику и на логику визуализации.
* Детерминированная вещественная математика (используются только операции с целыми числами).

## Подготовка к скачиванию, сборке и запуску

Для хранения бинарных данных, в этом репозитории используется [Git LFS](https://git-lfs.github.com/). Чтобы получить полноценную копию репозитория, необходимо наличие этого расширения.

Для сборки требуется [Visual Studio 2019](https://visualstudio.microsoft.com) с установленным **.NET Standard 2.0** (Входит в одно из последних обновлений Visual Studio). Запуск осуществляется на *Unity 2018.3*. Возможен запуск с другой версией, но может потребоваться заменить библиотеки Unity, находящиеся в директории *lib* этого репозитория.

## Собираем и запускаем

* Для начала требуется собрать исходный код, т.к. он расположен в отдельных проектах и не компилируется с помощью *Unity*. Открываем **Asteroids.sln** и собираем с любой конфигурацией. Все необходимые файлы (dll и pdb) автоматически копируются в директорию *Plugins* проекта *Unity* после каждой сборки.

* Открываем *Unity* проект, находящийся в директории *src/ClientUnity*, открываем сцену *Main* (внутри директории *Scenes* в проекте *Unity*), нажимаем *Play*.

## Управление в игре

* Создание корабля - **Enter**.
* Передвижение корабля - **WASD** или **стрелки**.
* Стрельба (перезарядка 0.5 секунд) - **Space**.
* Альтернативная стрельба (перезарядка 4 секунды) - **E**.

## Мультиплеер

* Для мультиплеера требуется открытый *UDP* порт **15034** на сервере.
* Приложение, выступающее в роли сервера, должно быть запущено и в начальном меню выбран пункт **HOST GAME**.
* Приложения, являющиеся клиентами, должны выбрать пункт меню **JOIN TO GAME** и ввести IP (поддерживается только [IPv4](https://en.wikipedia.org/wiki/IPv4)) адрес сервера и нажать кнопку **JOIN**.
